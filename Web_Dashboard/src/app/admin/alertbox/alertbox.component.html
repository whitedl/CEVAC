<mat-expansion-panel
  expanded="{{ (alerts$ | async)?.length > 0 }}"
  class="scrollableExpansion"
>
  <mat-expansion-panel-header class="mat-child-overflow">
    <mat-panel-title
      matBadge="{{ (alerts$ | async)?.length }}"
      matBadgeOverlap="false"
      matBadgePosition="above before"
      matBadgeColor="accent"
    >
      Alerts
    </mat-panel-title>
    <mat-chip-list>
      <mat-chip>Critical</mat-chip>
      <mat-chip>Warning</mat-chip>
    </mat-chip-list>
  </mat-expansion-panel-header>
  <ng-template matExpansionPanelContent>
    <mat-action-list dense>
      <button
        mat-list-item
        *ngFor="let alert of critical$ | async"
        (click)="focus(alert)"
      >
        <mat-icon matListIcon [ngStyle]="getAlertColor(alert.AlertType)">
          warning
        </mat-icon>
        <h5 mat-line>{{ alert.AlertMessage }}</h5>
        <p mat-line>{{ alert.BuildingDName }}</p>
      </button>
      <button
        mat-list-item
        *ngFor="let alert of noncritical$ | async"
        (click)="focus(alert)"
      >
        <mat-icon matListIcon [ngStyle]="getAlertColor(alert.AlertType)">
          notification_important
        </mat-icon>
        <h5 mat-line>{{ alert.AlertMessage }}</h5>
        <p mat-line>{{ alert.BuildingDName }}</p>
      </button>
    </mat-action-list>
  </ng-template>
</mat-expansion-panel>
